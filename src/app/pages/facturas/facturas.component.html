<div class="card">
    <p-toast />
    <h3 class="text-center uppercase">Facturas</h3>
    <br>
      <p-table #dt2 
              [value]="datos" 
              dataKey="id"
              [rows]="10"
              [rowsPerPageOptions]="[10, 25, 50]"
              [loading]="loading"
              [paginator]="true"
              [globalFilterFields]="['apellido1',
              'apellido2',
              'ciudad',
              'codigo_postal',
              'correo',
              'direccion',
              'empleado',
              'empresa',
              'estado',
              'fecha_reg',
              'id',
              'id_ciudad',
              'id_pais',
              'id_usu_reg',
              'nombre',
              'pais',
              'rfc',
              'telefono']"
            [tableStyle]="{ 'min-width': '100rem', 'max-width': '150rem', 'width': '100%' }">
            <ng-template #header>
            
              <tr>
                <th style="min-width: 2rem;  max-width: 5rem;">#</th>
                <th style="min-width: 12rem; max-width: 15rem;">Nombre</th>
                <th style="min-width: 10rem; max-width: 12rem;">Teléfono</th>
                <th style="min-width: 15rem; max-width: 18rem;">Correo</th>
                <th style="min-width: 10rem; max-width: 15rem;">Dirección</th>
                <th style="min-width: 10rem; max-width: 15rem;">Ciudad</th>
                <th style="min-width: 8rem; max-width:  10rem;">País</th>
                <th style="min-width: 4rem;  max-width: 8rem;">Código postal</th>
                <th style="min-width: 10rem; max-width: 12rem;">RFC</th>
                <th style="min-width: 10rem; max-width: 16rem;">Empresa</th>
                <th style="min-width: 12rem; max-width: 16rem;">Empleado</th>
                <th style="min-width: 7rem;  max-width: 8rem;">Estado</th>
                <th style="min-width: 15rem; max-width: 18rem;">Fecha de Registro</th>
                <th style="min-width: 12rem; max-width: 15rem;">Acciones</th>
              </tr>
          </ng-template>
          <ng-template #caption>
              <div class="flex gap-2">
                  <p-button label="Crear" [outlined]="true" icon="pi pi-user-plus" (click)="formModal('Crear cliente')" />
                  <p-button label="limpiar" [outlined]="true" icon="pi pi-filter-slash" (click)="clear(dt2)" />
                  <p-iconfield iconPosition="left" class="ml-auto">
                      <form [formGroup]="form">
                      <p-inputicon>
                          <i class="pi pi-search"></i>
                      </p-inputicon>
                     
                          <input pInputText type="text" formControlName="buscar" (input)="searchGlobal($event)" placeholder="Buscar">
                      </form>
                      
                  </p-iconfield>
              </div>
          </ng-template>
          <ng-template #body let-datos let-i="rowIndex">
            <tr>
                  <td>{{ i+1 }}</td>
                  <td>{{ datos.nombre }} {{ datos.apellido1 }}  {{ datos.apellido2 }}</td>
                  <td>{{ datos.telefono }}</td>
                  <td>{{ datos.correo }}</td>
                  <td>{{ datos.direccion }}</td>
                  <td>{{ datos.ciudad }}</td>
                  <td>{{ datos.pais }}</td>
                  <td>{{ datos.codigo_postal }}</td>
                  <td>{{ datos.rfc }}</td>
                  <td>{{ datos.empresa }}</td>
                  <td>{{ datos.empleado }}</td>
                  <td><p-tag
                      [value]="getStatusNombre(datos.estado)"
                      [severity]="getSeverity(datos.estado)" />
                  </td>
                  <td>{{ datos.fecha_reg | date:"dd/MM/yyyy h:mm a"}}</td>
                  <td>
                     
                      <form [formGroup]="form" style="    display: flex;
                          flex-direction: row;
                          align-content: center;
                          justify-content: flex-start;
                          align-items: center;     gap: 8px;">
                          <p-button icon="pi pi-pencil"  severity="warn" pTooltip="Editar" tooltipPosition="bottom" (click)="formModal('Editar cliente', datos)"/>
                          <p-toggleswitch 
                            pTooltip="{{ datos.estado ? 'Activo' : 'Inactivo' }}" 
                            tooltipPosition="bottom" 
                            [formControl]="getEstadoControl(datos)" 
                            (change)="onEstadoChange(datos)" 
                          />
  
                      </form>
  
                  </td>
  
  
              </tr>
          </ng-template>
      </p-table>
  </div>